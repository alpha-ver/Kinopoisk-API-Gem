# КиноПоиск API (Gem)

Гем основан на API от Andrzej Wielski: http://docs.kinopoiskapi.apiary.io/. Спасибо автору за такую великолепную реализацию.

Этот gem создан для упрощения работы с КиноПоиск API в проектах Ruby on Rails.

## Установка

Добавьте эту строку в Gemfile вашего приложения:

```ruby
gem 'KinopoiskAPI' , github: 'afuno/Kinopoisk-API-Gem', branch: 'master'
```

Затем выполните:

    $ bundle


## Использование

### Фильм

```ruby
film = KinopoiskAPI::Film.new(733493)
```
```ruby
#   Вся информация о фильме
film.all
```
```ruby
#   Название фильма на русском
film.title
```
```ruby
#   Оригинальное название фильма
film.original_title
```

Доступен вывод следующей информации:

* **url** - URL адрес страницы на КиноПоиск
* **title** - Название на русском
* **original_title** - Название на английском
* **slogan** - Слоган
* **description** - Описание
* **poster** - Полный адрес на постер (в формате JPG)
* **year** - Год выхода
* **kinopoisk** - Массив следующих данных для КиноПоиск:
    * **rating** - Рейтинг
    * **quantity** - Количество оценивших
    * **good_reviews_in_percentage** - Количество положительных рецензий в процентах
    * **number_of_good_reviews** - Количество положительных рецензий
    * **waiting_in_percentage** - Количество ожидающих в процентах
    * **number_of_waiting** - Количество ожидающих
* **imdb** - Массив следующих данных для IMDb:
    * **rating** - Рейтинг
    * **quantity** - Количество оценивших
* **number_of_reviews** - Количество рецензий
* **duration** - Продолжительность фильма
* **countries** - Страна или список стран
* **genres** - Список жанров
* **video** - Полный адрес на трейлер
* **minimal_age** - Минимальный рекомендуемый возраст

### Режисеры, актеры, операторы и т. д.

```ruby
staff = KinopoiskAPI::Staff.new(733493)
```
```ruby
#   Все имена всех профессий
staff.all
```
```ruby
#   Все имена одной профессии
staff.profession('writer')
```

Доступен вывод следующей информации:

* **id** - Идентификатор имени на сайте КиноПоиск
* **url** - URL на страницу именина КиноПоиск
* **full_name** - Имя на русском
* **original_full_name** - Имя на английском
* **poster** - Полный адрес на постер (в формате JPG)
* **profession** - Профессия на русском (актер, режиссер и т. д.)

### Галерея

```ruby
gallery = KinopoiskAPI::Gallery.new(733493)
```
```ruby
#   Все изображения из всех разделов
gallery.all
```
```ruby
#   Все изображения из конкретного раздела
gallery.section('poster')
```

Доступен вывод следующей информации:

* **image** - Полный адрес на полное изображение (в формате JPG)
* **preview** - Полный адрес на превью (в формате JPG)

### Похожие

```ruby
similar = KinopoiskAPI::Similar.new(733493)
```
```ruby
#   Все похожие фильмы
similar.all
```

Доступен вывод следующей информации:

* **title** - Название на русском
* **original_title** - Название на английском
* **year** - Год выхода
* **rating** - Рейтинг
* **number_of_rated** - Количество оценивших
* **poster** - Полный адрес на постер (в формате JPG)
* **duration** - Продолжительность фильма
* **countries** - Страна или список стран
* **genres** - Список жанров

### Жанры

```ruby
genres = KinopoiskAPI::Genres.new
```
```ruby
#   Все жанры
genres.all
```

Доступен вывод следующей информации:

* **id** - Идентификатор жанра на сайте КиноПоиск
* **name** - Жанр на русском

### Глобавльный поиск

```ruby
global_search = KinopoiskAPI::GlobalSearch.new('Звездные')
```
```ruby
#   Скорее всего вы искали этот фильм
global_search.exactly
```
```ruby
#   Возможно, вы искали эти фильмы
global_search.maybe
```
```ruby
#   Или даже этих людей
global_search.names
```

Доступен вывод следующей информации:

* **all** - Полный массив данных
* **keyword** - Ключевое слово (запрос)
* **number_of_films** - Количество найденных фильмов по ключевому слову
* **number_of_names** - Количество найденных имен по ключевому слову
* **exactly** - Один, наиболее подходящий фильм:
    * **title** - Название на русском
    * **original_title** - Название на английском
    * **info** - Краткая информация
    * **duration** - Продолжительность фильма
    * **year** - Год выхода
    * **countries** - Страна или список стран
    * **genres** - Список жанров
    * **rating** - Рейтинг
    * **number_of_rated** - Количество оценивших
    * **poster** - Полный адрес на постер (в формате JPG)
* **maybe** - Список фильмов, которые также подходят под запрос:
    * **title** - Название на русском
    * **original_title** - Название на английском
    * **info** - Краткая информация
    * **duration** - Продолжительность фильма
    * **year** - Год выхода
    * **countries** - Страна или список стран
    * **genres** - Список жанров
    * **rating** - Рейтинг
    * **number_of_rated** - Количество оценивших
    * **poster** - Полный адрес на постер (в формате JPG)
* **names** - Список имен, которые также подходят под запросЖ
    * **full_name** - Имя на русском
    * **original_full_name** - Имя на английском
    * **info** - Краткая информация
    * **poster** - Полный адрес на постер (в формате JPG)



* **aaaa** - bbbb

### Рецензии

```ruby
reviews = KinopoiskAPI::Reviews.new(733493)
```
```ruby
#   Количество рецензий
reviews.quantity.reviews
```
```ruby
#   Рецензии
reviews.reviews
```

Доступен вывод следующей информации:

* **all** - Полный массив данных
* **pages** - Количество страниц
* **page** - Текущая страница
* **quantity** - Массив следующих данных:
    * **reviews** - Количество рецензий
    * **good_reviews** - Количество положительных рецензий
    * **good_reviews_in_percent** - Количество положительных рецензий в процентах
    * **bad_reviews** - Количество отризательных рецензий
    * **neutral_reviews** - Количество нейтральных рецензий
* **reviews** - Список рецензий:
    * **id** - Идентификатор на КиноПоиск
    * **type** - Тип: положительный, негативный или нейтральный
    * **data** - Дата и время публикации
    * **author** - Массив данных об авторе:
        * **name** - Имя (или никнейм) автора рецензии
        * **avatar** - Полный адрес на аватар (в формате JPG)
    * **title** - Заголовок
    * **description** - Описание

## License

The gem is available as open source under the terms of the [MIT License](http://opensource.org/licenses/MIT).

